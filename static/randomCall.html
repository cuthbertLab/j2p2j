<script>
require(['j2p2j'], 
        function(j) {
    
    changePython = function () {
        var val = this.value; // HTMLInput
        j.call(val, function(data) { $('#pyOutput').text(data); });
    };
    setup = function () {
        j.call('import random');
        var $main = $("<div id='pyjsMain'>" + 
            "Put python code to run here: (danger: can affect local filesystem)<br/></div>");
        $main.css('font-size', '40px').css('margin','20px 20px 20px 20px').css('line-height', '50px');
        var $pi = $("<input type='text' id='pythonIn' size='120' style='width: 300px' value='random.randint(25, 30)'/>");
        $pi.change(changePython);
        $main.append($pi);
        $main.append("<div id='pyOutput'>Output goes here</div>");
        $main.append("<div style='font-size: 12px'>I already called 'import random' to save time. Note that if you assign a variable, it will stick, even across reloads.</div>")
        $('body').prepend($main);
    }
    
    j.start(setup);
});
</script>
